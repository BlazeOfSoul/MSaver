<p-dropdown
    [options]="typeOptions"
    [(ngModel)]="selectedType"
    optionLabel="label"
    optionValue="value"
    styleClass="mb-3 sm:w-40"
></p-dropdown>
<p-table [value]="getCategories()" responsiveLayout="scroll" showGridlines size="small">
    <ng-template pTemplate="header">
        <tr class="custom-header">
            <th>Категория</th>
            <th *ngFor="let m of months" class="text-center">{{ m.name }}</th>
            <th class="text-center">Среднее</th>
            <th class="text-center">Всего</th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-category>
        <tr>
            <td class="font-medium">{{ category }}</td>
            <td *ngFor="let m of months; let i = index" class="text-center">
                {{
                    (incomeTableData[category]?.[i] ?? expenseTableData[category]?.[i] ?? 0)
                        | currency: 'BYN ':'symbol':'1.0-2'
                }}
            </td>
            <td class="text-center text-yellow-500 font-semibold">
                {{ getCategoryAverage(category) | currency : 'BYN ' : 'symbol' : '1.0-2' }}
            </td>
            <td class="text-center text-green-600 font-bold">
                {{ getCategoryTotal(category) | currency : 'BYN ' : 'symbol' : '1.0-2' }}
            </td>
        </tr>
    </ng-template>

    <ng-template pTemplate="footer">
        <tr>
            <td>Итого</td>
            <td *ngFor="let m of months; let i = index" class="text-center">
                {{ getMonthSum(i) | currency : 'BYN ' : 'symbol' : '1.0-2' }}
            </td>
            <td class="text-center">
                {{ getTotalAverage() | currency : 'BYN ' : 'symbol' : '1.0-2' }}
            </td>
            <td class="text-center">
                {{ getTotalSum() | currency : 'BYN ' : 'symbol' : '1.0-2' }}
            </td>
        </tr>
    </ng-template>
</p-table>
